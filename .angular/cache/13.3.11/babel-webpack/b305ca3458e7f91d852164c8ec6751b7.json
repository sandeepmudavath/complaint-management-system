{"ast":null,"code":"import { BehaviorSubject, of } from 'rxjs';\nimport { delay } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nexport let ComplaintService = /*#__PURE__*/(() => {\n  class ComplaintService {\n    constructor() {\n      this.complaints = [];\n      this.complaintsSubject = new BehaviorSubject([]);\n      this.initializeMockData();\n    }\n\n    initializeMockData() {\n      const mockComplaints = [{\n        id: 'CMP-001',\n        title: 'Product not working as expected',\n        description: 'The wireless headphones I purchased last week are not connecting to my phone via Bluetooth. I have tried resetting both devices multiple times but the issue persists.',\n        category: 'product',\n        priority: 'high',\n        status: 'open',\n        customerName: 'John Smith',\n        customerEmail: 'john.smith@email.com',\n        customerPhone: '+1 234-567-8901',\n        createdAt: new Date('2026-01-28'),\n        updatedAt: new Date('2026-01-28')\n      }, {\n        id: 'CMP-002',\n        title: 'Incorrect billing amount',\n        description: 'I was charged $150 instead of $99 for my monthly subscription. Please review and refund the difference.',\n        category: 'billing',\n        priority: 'urgent',\n        status: 'in-progress',\n        customerName: 'Sarah Johnson',\n        customerEmail: 'sarah.j@email.com',\n        assignedTo: 'Mike Wilson',\n        createdAt: new Date('2026-01-27'),\n        updatedAt: new Date('2026-01-29')\n      }, {\n        id: 'CMP-003',\n        title: 'Delayed delivery',\n        description: 'My order #ORD-45678 was supposed to arrive 5 days ago. Tracking shows it is still in transit. Need urgent resolution.',\n        category: 'delivery',\n        priority: 'high',\n        status: 'pending',\n        customerName: 'Michael Brown',\n        customerEmail: 'mbrown@email.com',\n        customerPhone: '+1 345-678-9012',\n        assignedTo: 'Lisa Chen',\n        createdAt: new Date('2026-01-25'),\n        updatedAt: new Date('2026-01-30')\n      }, {\n        id: 'CMP-004',\n        title: 'Software installation issue',\n        description: 'Unable to install the software on Windows 11. Getting error code 0x80070005. Need technical assistance.',\n        category: 'technical',\n        priority: 'medium',\n        status: 'resolved',\n        customerName: 'Emily Davis',\n        customerEmail: 'emily.d@email.com',\n        assignedTo: 'Tom Harris',\n        createdAt: new Date('2026-01-20'),\n        updatedAt: new Date('2026-01-26'),\n        resolvedAt: new Date('2026-01-26'),\n        resolution: 'Provided step-by-step guide to run installer as administrator. Issue resolved successfully.'\n      }, {\n        id: 'CMP-005',\n        title: 'Poor customer service experience',\n        description: 'Called support 3 times and was put on hold for over 30 minutes each time. Very frustrating experience.',\n        category: 'service',\n        priority: 'medium',\n        status: 'closed',\n        customerName: 'Robert Wilson',\n        customerEmail: 'rwilson@email.com',\n        assignedTo: 'Jane Doe',\n        createdAt: new Date('2026-01-15'),\n        updatedAt: new Date('2026-01-22'),\n        resolvedAt: new Date('2026-01-22'),\n        resolution: 'Apologized for the inconvenience. Provided direct contact for future issues and offered 20% discount on next purchase.'\n      }, {\n        id: 'CMP-006',\n        title: 'Missing items in order',\n        description: 'Ordered 5 items but only received 3. Order number is #ORD-78901. Missing: Blue T-shirt (L) and Black Jeans (32).',\n        category: 'delivery',\n        priority: 'high',\n        status: 'open',\n        customerName: 'Jennifer Martinez',\n        customerEmail: 'jmartinez@email.com',\n        customerPhone: '+1 456-789-0123',\n        createdAt: new Date('2026-01-30'),\n        updatedAt: new Date('2026-01-30')\n      }, {\n        id: 'CMP-007',\n        title: 'Refund not processed',\n        description: 'Returned the item 2 weeks ago but have not received the refund yet. Return tracking shows item was delivered.',\n        category: 'billing',\n        priority: 'high',\n        status: 'in-progress',\n        customerName: 'David Lee',\n        customerEmail: 'david.lee@email.com',\n        assignedTo: 'Mike Wilson',\n        createdAt: new Date('2026-01-29'),\n        updatedAt: new Date('2026-02-01')\n      }, {\n        id: 'CMP-008',\n        title: 'App crashes frequently',\n        description: 'The mobile app crashes every time I try to view my order history. Using iPhone 14 with iOS 17.2.',\n        category: 'technical',\n        priority: 'medium',\n        status: 'open',\n        customerName: 'Amanda Taylor',\n        customerEmail: 'ataylor@email.com',\n        createdAt: new Date('2026-02-01'),\n        updatedAt: new Date('2026-02-01')\n      }];\n      this.complaints = mockComplaints;\n      this.complaintsSubject.next(this.complaints);\n    }\n\n    getComplaints() {\n      return this.complaintsSubject.asObservable();\n    }\n\n    getComplaintById(id) {\n      return of(this.complaints.find(c => c.id === id)).pipe(delay(300));\n    }\n\n    getStats() {\n      const stats = {\n        total: this.complaints.length,\n        open: this.complaints.filter(c => c.status === 'open').length,\n        inProgress: this.complaints.filter(c => c.status === 'in-progress').length,\n        resolved: this.complaints.filter(c => c.status === 'resolved').length,\n        closed: this.complaints.filter(c => c.status === 'closed').length\n      };\n      return of(stats).pipe(delay(200));\n    }\n\n    getRecentComplaints(limit = 5) {\n      const sorted = [...this.complaints].sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()).slice(0, limit);\n      return of(sorted).pipe(delay(200));\n    }\n\n    createComplaint(complaint) {\n      const newComplaint = {\n        id: `CMP-${String(this.complaints.length + 1).padStart(3, '0')}`,\n        title: complaint.title || '',\n        description: complaint.description || '',\n        category: complaint.category || 'other',\n        priority: complaint.priority || 'medium',\n        status: 'open',\n        customerName: complaint.customerName || '',\n        customerEmail: complaint.customerEmail || '',\n        customerPhone: complaint.customerPhone,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      this.complaints = [newComplaint, ...this.complaints];\n      this.complaintsSubject.next(this.complaints);\n      return of(newComplaint).pipe(delay(500));\n    }\n\n    updateComplaint(id, updates) {\n      const index = this.complaints.findIndex(c => c.id === id);\n\n      if (index !== -1) {\n        this.complaints[index] = Object.assign(Object.assign(Object.assign({}, this.complaints[index]), updates), {\n          updatedAt: new Date()\n        });\n        this.complaintsSubject.next(this.complaints);\n        return of(this.complaints[index]).pipe(delay(500));\n      }\n\n      return of(undefined);\n    }\n\n    deleteComplaint(id) {\n      const index = this.complaints.findIndex(c => c.id === id);\n\n      if (index !== -1) {\n        this.complaints.splice(index, 1);\n        this.complaintsSubject.next(this.complaints);\n        return of(true).pipe(delay(300));\n      }\n\n      return of(false);\n    }\n\n    filterComplaints(status, category, priority, searchTerm) {\n      let filtered = [...this.complaints];\n\n      if (status) {\n        filtered = filtered.filter(c => c.status === status);\n      }\n\n      if (category) {\n        filtered = filtered.filter(c => c.category === category);\n      }\n\n      if (priority) {\n        filtered = filtered.filter(c => c.priority === priority);\n      }\n\n      if (searchTerm) {\n        const term = searchTerm.toLowerCase();\n        filtered = filtered.filter(c => c.title.toLowerCase().includes(term) || c.description.toLowerCase().includes(term) || c.customerName.toLowerCase().includes(term) || c.id.toLowerCase().includes(term));\n      }\n\n      return of(filtered).pipe(delay(200));\n    }\n\n  }\n\n  ComplaintService.ɵfac = function ComplaintService_Factory(t) {\n    return new (t || ComplaintService)();\n  };\n\n  ComplaintService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ComplaintService,\n    factory: ComplaintService.ɵfac,\n    providedIn: 'root'\n  });\n  return ComplaintService;\n})();","map":null,"metadata":{},"sourceType":"module"}